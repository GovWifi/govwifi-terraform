name: govwifi-terraform-linting
on: [push, pull_request]
jobs:
  test:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v2

      - name: lint
        run: |
          brew install tfenv tflint findutils
          tfenv install $(cat .terraform-version)
          tfenv use $(cat .terraform-version)
          GITHUB_TOKEN=${{ secrets.GH_TOKEN }} tflint --init
          PATH="/usr/local/opt/findutils/libexec/gnubin:$PATH" make lint
